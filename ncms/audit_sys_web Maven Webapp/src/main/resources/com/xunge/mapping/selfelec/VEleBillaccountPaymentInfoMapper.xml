<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xunge.dao.selfelec.VEleBillaccountPaymentInfoMapper">
  <resultMap id="BaseResultMap" type="com.xunge.model.selfelec.VEleBillaccountPaymentInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Jul 23 03:57:00 CST 2017.
    -->
    <result column="billaccountpaymentdetail_id" jdbcType="VARCHAR" property="billaccountpaymentdetailId" />
    <result column="billaccount_id" jdbcType="VARCHAR" property="billaccountId" />
    <result column="billamount_startdate" jdbcType="DATE" property="billamountStartdate" />
    <result column="billamount_enddate" jdbcType="DATE" property="billamountEnddate" />
    <result column="billamount_date" jdbcType="DATE" property="billamountDate" />
    <result column="buy_method" jdbcType="INTEGER" property="buyMethod" />
    <result column="payment_method" jdbcType="INTEGER" property="paymentMethod" />
    <result column="bill_type" jdbcType="INTEGER" property="billType" />
    <result column="invoice_type" jdbcType="INTEGER" property="invoiceType" />
    <result column="tax_payment_type" jdbcType="INTEGER" property="taxPaymentType" />
    <result column="is_vat_deduction" jdbcType="INTEGER" property="isVatDeduction" />
    <result column="business_type" jdbcType="INTEGER" property="businessType" />
    <result column="amount_type" jdbcType="INTEGER" property="amountType" />
    <result column="billamount_type" jdbcType="INTEGER" property="billamountType" />
    <result column="billamount_notax_sys" jdbcType="DECIMAL" property="billamountNotaxSys" />
    <result column="billamount_notax" jdbcType="DECIMAL" property="billamountNotax" />
    <result column="loss_amount_sys" jdbcType="DECIMAL" property="lossAmountSys" />
    <result column="loss_amount" jdbcType="DECIMAL" property="lossAmount" />
    <result column="billamount_taxamount_sys" jdbcType="DECIMAL" property="billamountTaxamountSys" />
    <result column="billamount_taxamount" jdbcType="DECIMAL" property="billamountTaxamount" />
    <result column="other_amount" jdbcType="DECIMAL" property="otherAmount" />
    <result column="bill_amount_sys" jdbcType="DECIMAL" property="billAmountSys" />
    <result column="bill_amount_actual" jdbcType="DECIMAL" property="billAmountActual" />
    <result column="total_degree" jdbcType="DECIMAL" property="totalDegree" />
    <result column="calc_multi" jdbcType="DECIMAL" property="calcMulti" />
    <result column="total_degree_actual" jdbcType="DECIMAL" property="totalDegreeActual" />
    <result column="submit_state" jdbcType="INTEGER" property="submitState" />
    <result column="auditing_state" jdbcType="INTEGER" property="auditingState" />
    <result column="auditing_user_id" jdbcType="VARCHAR" property="auditingUserId" />
    <result column="auditing_date" jdbcType="TIMESTAMP" property="auditingDate" />
    <result column="paymentdetail_note" jdbcType="VARCHAR" property="paymentdetailNote" />
    <result column="preg_name" jdbcType="VARCHAR" property="pregName" />
    <result column="reg_name" jdbcType="VARCHAR" property="regName" />
    <result column="preg_id" jdbcType="VARCHAR" property="pregId" />
    <result column="reg_id" jdbcType="VARCHAR" property="regId" />
    <result column="plan_date" jdbcType="DATE" property="planDate" />
    <result column="billaccount_code" jdbcType="VARCHAR" property="billaccountCode" />
    <result column="billaccount_name" jdbcType="VARCHAR" property="billaccountName" />
    <result column="contract_code" jdbcType="VARCHAR" property="contractCode" />
    <result column="contract_name" jdbcType="VARCHAR" property="contractName" />
    <result column="tax_rate" jdbcType="DECIMAL" property="taxRate" />
    <result column="payment_state" jdbcType="INTEGER" property="paymentState" />
    <result column="billaccount_state" jdbcType="INTEGER" property="billaccountState" />
  </resultMap>
  <sql id="Example_Where_Clause">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Jul 23 03:57:00 CST 2017.
    -->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Jul 23 03:57:00 CST 2017.
    -->
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Jul 23 03:57:00 CST 2017.
    -->
    billaccountpaymentdetail_id, billaccount_id, billamount_startdate, billamount_enddate, 
    billamount_date, buy_method, payment_method, bill_type, invoice_type, tax_payment_type, 
    is_vat_deduction, business_type, amount_type, billamount_type, billamount_notax_sys, 
    billamount_notax, loss_amount_sys, loss_amount, billamount_taxamount_sys, billamount_taxamount, 
    other_amount, bill_amount_sys, bill_amount_actual, total_degree, calc_multi, total_degree_actual, 
    submit_state, auditing_state, auditing_user_id, auditing_date, paymentdetail_note, 
    preg_name, reg_name, preg_id, reg_id, billaccount_code, billaccount_name, contract_code, 
    contract_name, tax_rate
  </sql>
  
  <!-- 查询报账点机报账点缴费详细信心  yuefy -->
  <select id="selectBillamountPaymentDetails" parameterType="Map" resultMap="BaseResultMap">
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />,plan_date,billaccount_state,payment_state
    from v_ele_billaccount_payment_info
    <where>
		<if test="warningDate != null">
			and billamount_enddate &lt;= (date_add(#{nowDateTime}, interval #{warningDate} day))
		</if>
    	<if test="billaccountName != '' and billaccountName != null">
			and billaccount_name like CONCAT('%',#{billaccountName,jdbcType=VARCHAR},'%')
		</if>
		<if test="billaccountCode != '' and billaccountCode != null">
			and billaccount_code like CONCAT('%',#{billaccountCode,jdbcType=VARCHAR},'%')
		</if>
		<if test="regId != '' and regId != null">
			and reg_id = #{regId,jdbcType=VARCHAR}
		</if>
		<if test="pregId != '' and pregId != null">
			and preg_id = #{pregId,jdbcType=VARCHAR}
		</if>
		<if test="billaccountState != '' and billaccountState != null">
			and billaccount_state = #{billaccountState,jdbcType=VARCHAR}
		</if>
		<!-- 缴费状态 -->
		<if test="paymentState != '' and paymentState != null">
			and payment_state = #{paymentState,jdbcType=VARCHAR}
		</if>
		<if test="billaccountpaymentdetailId != '' and billaccountpaymentdetailId != null">
			and billaccountpaymentdetail_id = #{billaccountpaymentdetailId,jdbcType=VARCHAR}
		</if>
		<!-- 审核状态 -->
		<if test="auditingState != '' and auditingState != null">
			and auditing_State = #{auditingState,jdbcType=VARCHAR}
		</if>
		 <!-- 根据权限过滤 -->
  			<!-- 	<include refid="com.xunge.dao.system.SysRegionVOMapper.queryRegionByUserIds"></include> -->
		<!-- 流程实例id集合 -->
		  <if test="idsList != null and idsList.size()>0">  
        	and billaccount_id in  
	        <foreach collection="idsList" item="item" index="index" open="(" separator="," close=")">  
                #{item.businessId}
            </foreach>  
   		</if>
   		<if test="regIds !=null and regIds.size()>0">
			and reg_id in
			<foreach collection="regIds" item="item" index="index" open="("
				separator="," close=")">
				#{item}
			</foreach>
		</if> 
   
    </where>
  </select>
  
  <select id="selectByExample" parameterType="com.xunge.model.selfelec.VEleBillaccountPaymentInfoExample" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Jul 23 03:57:00 CST 2017.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    from v_ele_billaccount_payment_info
    <where>
    <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
      <if test="regIds !=null and regIds.size()>0">
       		AND reg_id in 
			<foreach collection="regIds" item="item" index="index" open="(" separator="," close=")">  
                #{item}
            </foreach>
       </if>
       </where>      
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  
    <!-- 审核主页面查询 -->
  <select id="queryEleBillaccountPayment" parameterType="Map" resultMap="BaseResultMap">
	SELECT
	<include refid="Base_Column_List" />
    from v_ele_billaccount_payment_info
  	<where>
  			<if test="auditingState != '' and auditingState != null">
				and auditing_state = #{auditingState,jdbcType=VARCHAR}
			</if>
			<if test="auditingUserId != '' and auditingUserId != null">
				and auditing_user_id = #{auditingUserId,jdbcType=VARCHAR}
			</if>
			<if test="submitState != '' and submitState != null">
				and submit_state = #{submitState,jdbcType=VARCHAR}
			</if>
			<if test="billaccountName != '' and billaccountName != null">
				and instr(billaccount_name,#{billaccountName,jdbcType=VARCHAR}) 
			</if>
			<if test="billaccountCode != '' and billaccountCode != null">
				and instr(billaccount_code,#{billaccountCode,jdbcType=VARCHAR}) 
			</if>
			<if test="regId != '' and regId != null">
				and reg_id = #{regId,jdbcType=VARCHAR}
			</if>
			<if test="pregId != '' and pregId != null">
				and preg_id = #{pregId,jdbcType=VARCHAR}
			</if>
			<if test="billaccountState != '' and billaccountState != null">
				and billaccount_state = #{billaccountState,jdbcType=VARCHAR}
			</if> 
			
			<!-- 审核通过只显示billamountid不为null的  -->
			<if test="auditflag != '' and auditflag != null">
				and (billamount_id is null  or billamount_id = '')
			</if>
			
			
			 <!-- 根据权限过滤 -->
   			<!-- 	<include refid="com.xunge.dao.system.SysRegionVOMapper.queryRegionByUserIds"></include> -->
			<!-- 流程实例id集合 -->
			  <if test="idsList != null and idsList.size()>0">  
	        	and billaccountpaymentdetail_id in  
		        <foreach collection="idsList" item="item" index="index" open="(" separator="," close=")">  
	                #{item.businessId}
	            </foreach>  
    		</if>  
		</where>
  </select>
  
  <delete id="deleteByExample" parameterType="com.xunge.model.selfelec.VEleBillaccountPaymentInfoExample">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Jul 23 03:57:00 CST 2017.
    -->
    delete from v_ele_billaccount_payment_info
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.xunge.model.selfelec.VEleBillaccountPaymentInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Jul 23 03:57:00 CST 2017.
    -->
    insert into v_ele_billaccount_payment_info (billaccountpaymentdetail_id, billaccount_id, 
      billamount_startdate, billamount_enddate, billamount_date, 
      buy_method, payment_method, bill_type, 
      invoice_type, tax_payment_type, is_vat_deduction, 
      business_type, amount_type, billamount_type, 
      billamount_notax_sys, billamount_notax, loss_amount_sys, 
      loss_amount, billamount_taxamount_sys, billamount_taxamount, 
      other_amount, bill_amount_sys, bill_amount_actual, 
      total_degree, calc_multi, total_degree_actual, 
      submit_state, auditing_state, auditing_user_id, 
      auditing_date, paymentdetail_note, preg_name, 
      reg_name, preg_id, reg_id, 
      billaccount_code, billaccount_name, contract_code, 
      contract_name, tax_rate)
    values (#{billaccountpaymentdetailId,jdbcType=VARCHAR}, #{billaccountId,jdbcType=VARCHAR}, 
      #{billamountStartdate,jdbcType=DATE}, #{billamountEnddate,jdbcType=DATE}, #{billamountDate,jdbcType=DATE}, 
      #{buyMethod,jdbcType=INTEGER}, #{paymentMethod,jdbcType=INTEGER}, #{billType,jdbcType=INTEGER}, 
      #{invoiceType,jdbcType=INTEGER}, #{taxPaymentType,jdbcType=INTEGER}, #{isVatDeduction,jdbcType=INTEGER}, 
      #{businessType,jdbcType=INTEGER}, #{amountType,jdbcType=INTEGER}, #{billamountType,jdbcType=INTEGER}, 
      #{billamountNotaxSys,jdbcType=DECIMAL}, #{billamountNotax,jdbcType=DECIMAL}, #{lossAmountSys,jdbcType=DECIMAL}, 
      #{lossAmount,jdbcType=DECIMAL}, #{billamountTaxamountSys,jdbcType=DECIMAL}, #{billamountTaxamount,jdbcType=DECIMAL}, 
      #{otherAmount,jdbcType=DECIMAL}, #{billAmountSys,jdbcType=DECIMAL}, #{billAmountActual,jdbcType=DECIMAL}, 
      #{totalDegree,jdbcType=DECIMAL}, #{calcMulti,jdbcType=DECIMAL}, #{totalDegreeActual,jdbcType=DECIMAL}, 
      #{submitState,jdbcType=INTEGER}, #{auditingState,jdbcType=INTEGER}, #{auditingUserId,jdbcType=VARCHAR}, 
      #{auditingDate,jdbcType=TIMESTAMP}, #{paymentdetailNote,jdbcType=VARCHAR}, #{pregName,jdbcType=VARCHAR}, 
      #{regName,jdbcType=VARCHAR}, #{pregId,jdbcType=VARCHAR}, #{regId,jdbcType=VARCHAR}, 
      #{billaccountCode,jdbcType=VARCHAR}, #{billaccountName,jdbcType=VARCHAR}, #{contractCode,jdbcType=VARCHAR}, 
      #{contractName,jdbcType=VARCHAR}, #{taxRate,jdbcType=DECIMAL})
  </insert>
  <insert id="insertSelective" parameterType="com.xunge.model.selfelec.VEleBillaccountPaymentInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Jul 23 03:57:00 CST 2017.
    -->
    insert into v_ele_billaccount_payment_info
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="billaccountpaymentdetailId != null">
        billaccountpaymentdetail_id,
      </if>
      <if test="billaccountId != null">
        billaccount_id,
      </if>
      <if test="billamountStartdate != null">
        billamount_startdate,
      </if>
      <if test="billamountEnddate != null">
        billamount_enddate,
      </if>
      <if test="billamountDate != null">
        billamount_date,
      </if>
      <if test="buyMethod != null">
        buy_method,
      </if>
      <if test="paymentMethod != null">
        payment_method,
      </if>
      <if test="billType != null">
        bill_type,
      </if>
      <if test="invoiceType != null">
        invoice_type,
      </if>
      <if test="taxPaymentType != null">
        tax_payment_type,
      </if>
      <if test="isVatDeduction != null">
        is_vat_deduction,
      </if>
      <if test="businessType != null">
        business_type,
      </if>
      <if test="amountType != null">
        amount_type,
      </if>
      <if test="billamountType != null">
        billamount_type,
      </if>
      <if test="billamountNotaxSys != null">
        billamount_notax_sys,
      </if>
      <if test="billamountNotax != null">
        billamount_notax,
      </if>
      <if test="lossAmountSys != null">
        loss_amount_sys,
      </if>
      <if test="lossAmount != null">
        loss_amount,
      </if>
      <if test="billamountTaxamountSys != null">
        billamount_taxamount_sys,
      </if>
      <if test="billamountTaxamount != null">
        billamount_taxamount,
      </if>
      <if test="otherAmount != null">
        other_amount,
      </if>
      <if test="billAmountSys != null">
        bill_amount_sys,
      </if>
      <if test="billAmountActual != null">
        bill_amount_actual,
      </if>
      <if test="totalDegree != null">
        total_degree,
      </if>
      <if test="calcMulti != null">
        calc_multi,
      </if>
      <if test="totalDegreeActual != null">
        total_degree_actual,
      </if>
      <if test="submitState != null">
        submit_state,
      </if>
      <if test="auditingState != null">
        auditing_state,
      </if>
      <if test="auditingUserId != null">
        auditing_user_id,
      </if>
      <if test="auditingDate != null">
        auditing_date,
      </if>
      <if test="paymentdetailNote != null">
        paymentdetail_note,
      </if>
      <if test="pregName != null">
        preg_name,
      </if>
      <if test="regName != null">
        reg_name,
      </if>
      <if test="pregId != null">
        preg_id,
      </if>
      <if test="regId != null">
        reg_id,
      </if>
      <if test="billaccountCode != null">
        billaccount_code,
      </if>
      <if test="billaccountName != null">
        billaccount_name,
      </if>
      <if test="contractCode != null">
        contract_code,
      </if>
      <if test="contractName != null">
        contract_name,
      </if>
      <if test="taxRate != null">
        tax_rate,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="billaccountpaymentdetailId != null">
        #{billaccountpaymentdetailId,jdbcType=VARCHAR},
      </if>
      <if test="billaccountId != null">
        #{billaccountId,jdbcType=VARCHAR},
      </if>
      <if test="billamountStartdate != null">
        #{billamountStartdate,jdbcType=DATE},
      </if>
      <if test="billamountEnddate != null">
        #{billamountEnddate,jdbcType=DATE},
      </if>
      <if test="billamountDate != null">
        #{billamountDate,jdbcType=DATE},
      </if>
      <if test="buyMethod != null">
        #{buyMethod,jdbcType=INTEGER},
      </if>
      <if test="paymentMethod != null">
        #{paymentMethod,jdbcType=INTEGER},
      </if>
      <if test="billType != null">
        #{billType,jdbcType=INTEGER},
      </if>
      <if test="invoiceType != null">
        #{invoiceType,jdbcType=INTEGER},
      </if>
      <if test="taxPaymentType != null">
        #{taxPaymentType,jdbcType=INTEGER},
      </if>
      <if test="isVatDeduction != null">
        #{isVatDeduction,jdbcType=INTEGER},
      </if>
      <if test="businessType != null">
        #{businessType,jdbcType=INTEGER},
      </if>
      <if test="amountType != null">
        #{amountType,jdbcType=INTEGER},
      </if>
      <if test="billamountType != null">
        #{billamountType,jdbcType=INTEGER},
      </if>
      <if test="billamountNotaxSys != null">
        #{billamountNotaxSys,jdbcType=DECIMAL},
      </if>
      <if test="billamountNotax != null">
        #{billamountNotax,jdbcType=DECIMAL},
      </if>
      <if test="lossAmountSys != null">
        #{lossAmountSys,jdbcType=DECIMAL},
      </if>
      <if test="lossAmount != null">
        #{lossAmount,jdbcType=DECIMAL},
      </if>
      <if test="billamountTaxamountSys != null">
        #{billamountTaxamountSys,jdbcType=DECIMAL},
      </if>
      <if test="billamountTaxamount != null">
        #{billamountTaxamount,jdbcType=DECIMAL},
      </if>
      <if test="otherAmount != null">
        #{otherAmount,jdbcType=DECIMAL},
      </if>
      <if test="billAmountSys != null">
        #{billAmountSys,jdbcType=DECIMAL},
      </if>
      <if test="billAmountActual != null">
        #{billAmountActual,jdbcType=DECIMAL},
      </if>
      <if test="totalDegree != null">
        #{totalDegree,jdbcType=DECIMAL},
      </if>
      <if test="calcMulti != null">
        #{calcMulti,jdbcType=DECIMAL},
      </if>
      <if test="totalDegreeActual != null">
        #{totalDegreeActual,jdbcType=DECIMAL},
      </if>
      <if test="submitState != null">
        #{submitState,jdbcType=INTEGER},
      </if>
      <if test="auditingState != null">
        #{auditingState,jdbcType=INTEGER},
      </if>
      <if test="auditingUserId != null">
        #{auditingUserId,jdbcType=VARCHAR},
      </if>
      <if test="auditingDate != null">
        #{auditingDate,jdbcType=TIMESTAMP},
      </if>
      <if test="paymentdetailNote != null">
        #{paymentdetailNote,jdbcType=VARCHAR},
      </if>
      <if test="pregName != null">
        #{pregName,jdbcType=VARCHAR},
      </if>
      <if test="regName != null">
        #{regName,jdbcType=VARCHAR},
      </if>
      <if test="pregId != null">
        #{pregId,jdbcType=VARCHAR},
      </if>
      <if test="regId != null">
        #{regId,jdbcType=VARCHAR},
      </if>
      <if test="billaccountCode != null">
        #{billaccountCode,jdbcType=VARCHAR},
      </if>
      <if test="billaccountName != null">
        #{billaccountName,jdbcType=VARCHAR},
      </if>
      <if test="contractCode != null">
        #{contractCode,jdbcType=VARCHAR},
      </if>
      <if test="contractName != null">
        #{contractName,jdbcType=VARCHAR},
      </if>
      <if test="taxRate != null">
        #{taxRate,jdbcType=DECIMAL},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.xunge.model.selfelec.VEleBillaccountPaymentInfoExample" resultType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Jul 23 03:57:00 CST 2017.
    -->
    select count(*) from v_ele_billaccount_payment_info
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Jul 23 03:57:00 CST 2017.
    -->
    update v_ele_billaccount_payment_info
    <set>
      <if test="record.billaccountpaymentdetailId != null">
        billaccountpaymentdetail_id = #{record.billaccountpaymentdetailId,jdbcType=VARCHAR},
      </if>
      <if test="record.billaccountId != null">
        billaccount_id = #{record.billaccountId,jdbcType=VARCHAR},
      </if>
      <if test="record.billamountStartdate != null">
        billamount_startdate = #{record.billamountStartdate,jdbcType=DATE},
      </if>
      <if test="record.billamountEnddate != null">
        billamount_enddate = #{record.billamountEnddate,jdbcType=DATE},
      </if>
      <if test="record.billamountDate != null">
        billamount_date = #{record.billamountDate,jdbcType=DATE},
      </if>
      <if test="record.buyMethod != null">
        buy_method = #{record.buyMethod,jdbcType=INTEGER},
      </if>
      <if test="record.paymentMethod != null">
        payment_method = #{record.paymentMethod,jdbcType=INTEGER},
      </if>
      <if test="record.billType != null">
        bill_type = #{record.billType,jdbcType=INTEGER},
      </if>
      <if test="record.invoiceType != null">
        invoice_type = #{record.invoiceType,jdbcType=INTEGER},
      </if>
      <if test="record.taxPaymentType != null">
        tax_payment_type = #{record.taxPaymentType,jdbcType=INTEGER},
      </if>
      <if test="record.isVatDeduction != null">
        is_vat_deduction = #{record.isVatDeduction,jdbcType=INTEGER},
      </if>
      <if test="record.businessType != null">
        business_type = #{record.businessType,jdbcType=INTEGER},
      </if>
      <if test="record.amountType != null">
        amount_type = #{record.amountType,jdbcType=INTEGER},
      </if>
      <if test="record.billamountType != null">
        billamount_type = #{record.billamountType,jdbcType=INTEGER},
      </if>
      <if test="record.billamountNotaxSys != null">
        billamount_notax_sys = #{record.billamountNotaxSys,jdbcType=DECIMAL},
      </if>
      <if test="record.billamountNotax != null">
        billamount_notax = #{record.billamountNotax,jdbcType=DECIMAL},
      </if>
      <if test="record.lossAmountSys != null">
        loss_amount_sys = #{record.lossAmountSys,jdbcType=DECIMAL},
      </if>
      <if test="record.lossAmount != null">
        loss_amount = #{record.lossAmount,jdbcType=DECIMAL},
      </if>
      <if test="record.billamountTaxamountSys != null">
        billamount_taxamount_sys = #{record.billamountTaxamountSys,jdbcType=DECIMAL},
      </if>
      <if test="record.billamountTaxamount != null">
        billamount_taxamount = #{record.billamountTaxamount,jdbcType=DECIMAL},
      </if>
      <if test="record.otherAmount != null">
        other_amount = #{record.otherAmount,jdbcType=DECIMAL},
      </if>
      <if test="record.billAmountSys != null">
        bill_amount_sys = #{record.billAmountSys,jdbcType=DECIMAL},
      </if>
      <if test="record.billAmountActual != null">
        bill_amount_actual = #{record.billAmountActual,jdbcType=DECIMAL},
      </if>
      <if test="record.totalDegree != null">
        total_degree = #{record.totalDegree,jdbcType=DECIMAL},
      </if>
      <if test="record.calcMulti != null">
        calc_multi = #{record.calcMulti,jdbcType=DECIMAL},
      </if>
      <if test="record.totalDegreeActual != null">
        total_degree_actual = #{record.totalDegreeActual,jdbcType=DECIMAL},
      </if>
      <if test="record.submitState != null">
        submit_state = #{record.submitState,jdbcType=INTEGER},
      </if>
      <if test="record.auditingState != null">
        auditing_state = #{record.auditingState,jdbcType=INTEGER},
      </if>
      <if test="record.auditingUserId != null">
        auditing_user_id = #{record.auditingUserId,jdbcType=VARCHAR},
      </if>
      <if test="record.auditingDate != null">
        auditing_date = #{record.auditingDate,jdbcType=TIMESTAMP},
      </if>
      <if test="record.paymentdetailNote != null">
        paymentdetail_note = #{record.paymentdetailNote,jdbcType=VARCHAR},
      </if>
      <if test="record.pregName != null">
        preg_name = #{record.pregName,jdbcType=VARCHAR},
      </if>
      <if test="record.regName != null">
        reg_name = #{record.regName,jdbcType=VARCHAR},
      </if>
      <if test="record.pregId != null">
        preg_id = #{record.pregId,jdbcType=VARCHAR},
      </if>
      <if test="record.regId != null">
        reg_id = #{record.regId,jdbcType=VARCHAR},
      </if>
      <if test="record.billaccountCode != null">
        billaccount_code = #{record.billaccountCode,jdbcType=VARCHAR},
      </if>
      <if test="record.billaccountName != null">
        billaccount_name = #{record.billaccountName,jdbcType=VARCHAR},
      </if>
      <if test="record.contractCode != null">
        contract_code = #{record.contractCode,jdbcType=VARCHAR},
      </if>
      <if test="record.contractName != null">
        contract_name = #{record.contractName,jdbcType=VARCHAR},
      </if>
      <if test="record.taxRate != null">
        tax_rate = #{record.taxRate,jdbcType=DECIMAL},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Jul 23 03:57:00 CST 2017.
    -->
    update v_ele_billaccount_payment_info
    set billaccountpaymentdetail_id = #{record.billaccountpaymentdetailId,jdbcType=VARCHAR},
      billaccount_id = #{record.billaccountId,jdbcType=VARCHAR},
      billamount_startdate = #{record.billamountStartdate,jdbcType=DATE},
      billamount_enddate = #{record.billamountEnddate,jdbcType=DATE},
      billamount_date = #{record.billamountDate,jdbcType=DATE},
      buy_method = #{record.buyMethod,jdbcType=INTEGER},
      payment_method = #{record.paymentMethod,jdbcType=INTEGER},
      bill_type = #{record.billType,jdbcType=INTEGER},
      invoice_type = #{record.invoiceType,jdbcType=INTEGER},
      tax_payment_type = #{record.taxPaymentType,jdbcType=INTEGER},
      is_vat_deduction = #{record.isVatDeduction,jdbcType=INTEGER},
      business_type = #{record.businessType,jdbcType=INTEGER},
      amount_type = #{record.amountType,jdbcType=INTEGER},
      billamount_type = #{record.billamountType,jdbcType=INTEGER},
      billamount_notax_sys = #{record.billamountNotaxSys,jdbcType=DECIMAL},
      billamount_notax = #{record.billamountNotax,jdbcType=DECIMAL},
      loss_amount_sys = #{record.lossAmountSys,jdbcType=DECIMAL},
      loss_amount = #{record.lossAmount,jdbcType=DECIMAL},
      billamount_taxamount_sys = #{record.billamountTaxamountSys,jdbcType=DECIMAL},
      billamount_taxamount = #{record.billamountTaxamount,jdbcType=DECIMAL},
      other_amount = #{record.otherAmount,jdbcType=DECIMAL},
      bill_amount_sys = #{record.billAmountSys,jdbcType=DECIMAL},
      bill_amount_actual = #{record.billAmountActual,jdbcType=DECIMAL},
      total_degree = #{record.totalDegree,jdbcType=DECIMAL},
      calc_multi = #{record.calcMulti,jdbcType=DECIMAL},
      total_degree_actual = #{record.totalDegreeActual,jdbcType=DECIMAL},
      submit_state = #{record.submitState,jdbcType=INTEGER},
      auditing_state = #{record.auditingState,jdbcType=INTEGER},
      auditing_user_id = #{record.auditingUserId,jdbcType=VARCHAR},
      auditing_date = #{record.auditingDate,jdbcType=TIMESTAMP},
      paymentdetail_note = #{record.paymentdetailNote,jdbcType=VARCHAR},
      preg_name = #{record.pregName,jdbcType=VARCHAR},
      reg_name = #{record.regName,jdbcType=VARCHAR},
      preg_id = #{record.pregId,jdbcType=VARCHAR},
      reg_id = #{record.regId,jdbcType=VARCHAR},
      billaccount_code = #{record.billaccountCode,jdbcType=VARCHAR},
      billaccount_name = #{record.billaccountName,jdbcType=VARCHAR},
      contract_code = #{record.contractCode,jdbcType=VARCHAR},
      contract_name = #{record.contractName,jdbcType=VARCHAR},
      tax_rate = #{record.taxRate,jdbcType=DECIMAL}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  
  <delete id="deletePaymentDetail" parameterType="Map">
  	DELETE from ele_payment 
  	WHERE 
  	billaccountpaymentdetail_id in
  	<foreach collection="idsList" item="item" index="index" open="(" separator="," close=")">  
         #{item}
	</foreach>  
  </delete>
  <select id="queryMaxBillAccountEnded" parameterType="java.lang.String" resultMap="BaseResultMap">
    SELECT ep.billaccountpaymentdetail_id,	MAX(ep.billamount_enddate) billamount_enddate,
	eb.plan_date from
    ele_payment ep LEFT JOIN ele_billaccount eb 
    ON ep.billaccount_id=eb.billaccount_id
    WHERE eb.billaccount_id=#{billaccountId}
  </select>
</mapper>